{"version":3,"sources":["../../src/utils/log.js"],"names":["cache","log","priority","table","console","arg","args","debug","info","once","warn","error","deprecated","oldUsage","newUsage","group","collapsed","groupCollapsed","groupEnd","formatArrayValue","v","opts","maxElts","size","string","i","length","formatValue","terminator","EPSILON","isInteger","Array","isArray","ArrayBuffer","isView","Number","isFinite","String","Math","abs","toFixed","toPrecision","decimal","indexOf","slice"],"mappings":"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","file":"log.js","sourcesContent":["/* eslint-disable no-console */\n/* global console */\nconst cache = {};\n\nconst log = {\n  priority: 0,\n  table(priority, table) {\n    if (priority <= log.priority && table) {\n      console.table(table);\n    }\n  },\n  log(priority, arg, ...args) {\n    if (priority <= log.priority) {\n      console.debug(`luma.gl: ${arg}`, ...args);\n    }\n  },\n  info(priority, arg, ...args) {\n    if (priority <= log.priority) {\n      console.log(`luma.gl: ${arg}`, ...args);\n    }\n  },\n  once(priority, arg, ...args) {\n    if (!cache[arg]) {\n      log.log(priority, arg, ...args);\n    }\n    cache[arg] = true;\n  },\n  warn(priority, arg, ...args) {\n    if (priority <= log.priority && !cache[arg]) {\n      console.warn(`luma.gl: ${arg}`, ...args);\n    }\n    cache[arg] = true;\n  },\n  error(priority, arg, ...args) {\n    console.error(`luma.gl: ${arg}`, ...args);\n  },\n  deprecated(oldUsage, newUsage) {\n    log.warn(0, `luma.gl: \\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n  },\n  group(priority, arg, {collapsed = false} = {}) {\n    if (priority <= log.priority) {\n      if (collapsed) {\n        console.groupCollapsed(`luma.gl: ${arg}`);\n      } else {\n        console.group(`luma.gl: ${arg}`);\n      }\n    }\n  },\n  groupEnd(priority, arg) {\n    if (priority <= log.priority) {\n      console.groupEnd(`luma.gl: ${arg}`);\n    }\n  }\n};\n\nfunction formatArrayValue(v, opts) {\n  const {maxElts = 16, size = 1} = opts;\n  let string = '[';\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${(i % size === 0) ? ' ' : ''}`;\n    }\n    string += formatValue(v[i], opts);\n  }\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {isInteger = false} = opts;\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nexport default log;\n"]}